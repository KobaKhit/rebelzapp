<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Admin â€¢ EduOrg</title>
	<link rel="stylesheet" href="/ui/styles.css" />
	<style>
		.grid{display:grid;gap:16px}
		.columns{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
		label{display:block;margin-bottom:6px;color:var(--muted)}
		select.input{height:38px}
		hr{border:none;border-top:1px solid #1b2440;margin:12px 0}
	</style>
</head>
<body>
	<header>
		<h1>Admin</h1>
		<nav>
			<a href="/ui/index.html">Home</a>
			<a href="/ui/chat.html">AI Chat</a>
		</nav>
	</header>
	<main class="grid">
		<section class="panel">
			<div class="row" style="justify-content:space-between;align-items:center">
				<div>
					<span class="badge">Auth</span>
					<span id="authState" class="small">Signed out</span>
				</div>
				<div class="row">
					<button id="logoutBtn" style="display:none">Logout</button>
				</div>
			</div>
			<div id="loginForm" class="columns">
				<div class="card">
					<h3>Login</h3>
					<label>Email</label>
					<input id="email" class="input" type="email" placeholder="admin@example.com" />
					<label>Password</label>
					<input id="password" class="input" type="password" placeholder="admin12345" />
					<div class="row" style="margin-top:10px"><button id="loginBtn">Login</button></div>
					<p class="small">Use the seeded admin if you ran scripts/seed.py</p>
				</div>
			</div>
		</section>

		<section id="adminPanels" class="grid" style="display:none">
			<div class="columns">
				<div class="card">
					<h3>Roles</h3>
					<div class="row"><button id="refreshRoles">Refresh</button></div>
					<div id="roles" class="list"></div>
					<hr />
					<h4>Create Role</h4>
					<label>Name</label>
					<input id="roleName" class="input" />
					<label>Description</label>
					<input id="roleDesc" class="input" />
					<div class="row" style="margin-top:10px"><button id="createRole">Create Role</button></div>
				</div>
				<div class="card">
					<h3>Permissions</h3>
					<div class="row"><button id="refreshPermissions">Refresh</button></div>
					<div id="permissions" class="list"></div>
					<hr />
					<h4>Create Permission</h4>
					<label>Name</label>
					<input id="permName" class="input" />
					<label>Description</label>
					<input id="permDesc" class="input" />
					<div class="row" style="margin-top:10px"><button id="createPermission">Create Permission</button></div>
				</div>
			</div>
			<div class="columns">
				<div class="card">
					<h3>Assign Permissions to Role</h3>
					<label>Role</label>
					<select id="roleSelect" class="input"></select>
					<div id="permChecks" class="list" style="margin-top:8px"></div>
					<div class="row" style="margin-top:10px"><button id="saveRolePerms">Save Permissions</button></div>
				</div>
				<div class="card">
					<h3>Assign Roles to User</h3>
					<label>User</label>
					<select id="userSelect" class="input"></select>
					<div id="roleChecks" class="list" style="margin-top:8px"></div>
					<div class="row" style="margin-top:10px"><button id="saveUserRoles">Save Roles</button></div>
				</div>
			</div>
		</section>
	</main>
	<script>
	const state = { token: localStorage.getItem(token) || null };

	const authStateEl = document.getElementById(authState);
	const loginFormEl = document.getElementById(loginForm);
	const adminPanelsEl = document.getElementById(adminPanels);
	const logoutBtn = document.getElementById(logoutBtn);

	function setAuthUI(){
		if(state.token){
			authStateEl.textContent = Signed
